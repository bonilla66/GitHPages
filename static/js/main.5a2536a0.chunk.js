(this.webpackJsonpdoublevision=this.webpackJsonpdoublevision||[]).push([[0],{31:function(e,t,r){},52:function(e,t){},53:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(14),s=r.n(c),o=(r(31),r(26)),l=r(3),u=r(2),i=r.n(u),p=r(5),x=r(11),b=r(7),d=(r(17),r(10)),j=r.n(d),f={Login:function(){var e=Object(p.a)(i.a.mark((function e(t,r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.post("https://posts-pw2021.herokuapp.com/api/v1/auth/signin",{username:t,password:r});case 3:if(200!==(n=e.sent).status){e.next=7;break}return localStorage.setItem("token",n.data.token),e.abrupt("return",!0);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Object(b.b)("Try again!",{type:"error"});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r){return e.apply(this,arguments)}}(),WhoamI:function(){var e=Object(p.a)(i.a.mark((function e(){var t,r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("token"),r={headers:{Authorization:"Bearer ".concat(t)}},e.next=5,j.a.get("https://posts-pw2021.herokuapp.com/api/v1/auth/whoami",r);case 5:200===(n=e.sent).status&&(localStorage.setItem("username",n.data.username),localStorage.setItem("role",n.data.role)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Object(b.b)("Something went wrong",{type:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),GetAll:function(){var e=Object(p.a)(i.a.mark((function e(t,r){var n,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=localStorage.getItem("token"),a={headers:{Authorization:"Bearer ".concat(n)}},e.next=5,j.a.get("https://posts-pw2021.herokuapp.com/api/v1/post/all?limit=".concat(r,"&page=").concat(t),a);case 5:if(200!==(c=e.sent).status){e.next=8;break}return e.abrupt("return",c.data.data);case 8:e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r){return e.apply(this,arguments)}}(),GetOne:function(){var e=Object(p.a)(i.a.mark((function e(t){var r,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=localStorage.getItem("token"),n={headers:{Authorization:"Bearer ".concat(r)}},e.next=5,j.a.get("https://posts-pw2021.herokuapp.com/api/v1/post/one/".concat(t),n);case 5:if(200!==(a=e.sent).status){e.next=8;break}return e.abrupt("return",a.data);case 8:e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),GetOwn:function(){var e=Object(p.a)(i.a.mark((function e(t,r){var n,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=localStorage.getItem("token"),a={headers:{Authorization:"Bearer ".concat(n)}},e.next=5,j.a.get("https://posts-pw2021.herokuapp.com/api/v1/post/owned?limit=".concat(r,"&page=").concat(t),a);case 5:if(200!==(c=e.sent).status){e.next=8;break}return e.abrupt("return",c.data.data);case 8:e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r){return e.apply(this,arguments)}}(),CreatePost:function(){var e=Object(p.a)(i.a.mark((function e(t,r,n){var a,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=localStorage.getItem("token"),c={headers:{Authorization:"Bearer ".concat(a)}},s={title:t,description:r,image:n},e.next=6,j.a.post("https://posts-pw2021.herokuapp.com/api/v1/post/create",s,c);case 6:if(201!==e.sent.status){e.next=9;break}return e.abrupt("return",!0);case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(0),Object(b.b)("Something went wrong",{type:"error"}),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r,n){return e.apply(this,arguments)}}(),GetAllFav:function(){var e=Object(p.a)(i.a.mark((function e(){var t,r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("token"),r={headers:{Authorization:"Bearer ".concat(t)}},e.next=5,j.a.get("https://posts-pw2021.herokuapp.com/api/v1/post/fav",r);case 5:if(200!==(n=e.sent).status){e.next=8;break}return e.abrupt("return",n.data);case 8:e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),Fav:function(){var e=Object(p.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=localStorage.getItem("token"),n={headers:{Authorization:"Bearer ".concat(r)}},e.next=5,j.a.patch("https://posts-pw2021.herokuapp.com/api/v1/post/fav/".concat(t),null,n);case 5:if(200!==e.sent.status){e.next=8;break}return e.abrupt("return",!0);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),console.log(e.t0.response),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),Like:function(){var e=Object(p.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=localStorage.getItem("token"),n={headers:{Authorization:"Bearer ".concat(r)}},e.next=5,j.a.patch("https://posts-pw2021.herokuapp.com/api/v1/post/like/".concat(t),null,n);case 5:e.sent.status,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0.response),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),Comment:function(){var e=Object(p.a)(i.a.mark((function e(t,r){var n,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=localStorage.getItem("token"),a={headers:{Authorization:"Bearer ".concat(n)}},c={description:r},e.next=6,j.a.patch("https://posts-pw2021.herokuapp.com/api/v1/post/comment/".concat(t),c,a);case 6:if(200!==e.sent.status){e.next=9;break}return e.abrupt("return",!0);case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0.response),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}(),Update:function(){var e=Object(p.a)(i.a.mark((function e(t,r,n,a){var c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=localStorage.getItem("token"),s={headers:{Authorization:"Bearer ".concat(c)}},o={title:r,description:n,image:a},e.next=6,j.a.put("https://posts-pw2021.herokuapp.com/api/v1/post/update/".concat(t),o,s);case 6:if(200!==e.sent.status){e.next=9;break}return e.abrupt("return",!0);case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(0),Object(b.b)("Something went wrong",{type:"error"}),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r,n,a){return e.apply(this,arguments)}}(),Active:function(){var e=Object(p.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=localStorage.getItem("token"),n={headers:{Authorization:"Bearer ".concat(r)}},e.next=5,j.a.patch("https://posts-pw2021.herokuapp.com/api/v1/post/toggle/".concat(t),null,n);case 5:if(200!==e.sent.status){e.next=8;break}return e.abrupt("return",!0);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),console.log(e.t0.response),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),Logout:function(){var e=Object(p.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("token"),window.location.reload();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},m=r(1),h=function(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null),r=Object(l.f)(),a=function(){var n=Object(p.a)(i.a.mark((function n(a){var c,s;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),c=e.current.value,(s=t.current.value)&&c){n.next=7;break}Object(b.b)("Please type your username and password",{type:"warning"}),n.next=17;break;case 7:return n.prev=7,n.next=10,f.Login(c,s);case 10:n.sent&&(f.WhoamI(),r("/main")),n.next=17;break;case 14:return n.prev=14,n.t0=n.catch(7),n.abrupt("return");case 17:case"end":return n.stop()}}),n,null,[[7,14]])})));return function(e){return n.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"bg-gradient-to-b from-pink-200 to-pink-600 w-full h-screen",children:[Object(m.jsx)(b.a,{}),Object(m.jsxs)("div",{className:"flex flex-col justify-center bg-white p-8 inset-x-px my-32 mx-12 absolute rounded-2xl md:mx-60 lg:mx-80",onSubmit:a,children:[Object(m.jsxs)("div",{className:"flex justify-center gap-4",children:[Object(m.jsx)("h1",{className:"text-gray-600 text-3xl font-quicksand font-bold text-center",children:" Double Vision   "}),Object(m.jsx)(x.b,{className:"w-10 text-pink-700 "})]}),Object(m.jsx)("h2",{className:"text-center text-gray-400 font-quicksand font-bold",children:"Where everything starts"}),Object(m.jsx)("input",{className:"mt-10 my-6  h-10 border-gray-600 border-2 rounded-xl mx-4  md:mx-12 ",type:"text",placeholder:" username",ref:e}),Object(m.jsx)("input",{className:"mt-1 my-8 h-10  border-gray-600 border-2 rounded-xl mx-4  md:mx-12",type:"password",placeholder:" ******************",ref:t}),Object(m.jsx)("button",{type:"submit",className:"bg-pink-500 p-4 rounded-xl text-white font-bold mx-12   hover:bg-pink-700",onClick:a,children:"Iniciar Sesion"})]})]})},O=r(4),g=r(6),v=(r(52),function(){var e=Object(l.g)(),t=Object(l.f)(),r=Object(n.useState)(),a=Object(O.a)(r,2),c=a[0],s=a[1],o=Object(n.useState)(""),u=Object(O.a)(o,2),x=u[0],d=u[1],j=Object(n.useState)(""),h=Object(O.a)(j,2),g=h[0],v=h[1],w=Object(n.useState)(""),y=Object(O.a)(w,2),k=y[0],N=y[1],S=Object(n.useState)(),C=Object(O.a)(S,2),I=C[0],q=C[1],A=Object(n.useRef)(null),B=Object(n.useRef)(null),R=Object(n.useRef)(null),z=localStorage.getItem("token"),G=localStorage.getItem("role");Object(n.useEffect)((function(){function r(){return(r=Object(p.a)(i.a.mark((function t(){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.GetOne(e.idpost);case 3:return r=t.sent,t.next=6,s(r);case 6:"true"===e.active?q(!0):q(!1),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}z&&"user"!=G?function(){r.apply(this,arguments)}():t("/")}),[]);var P=function(){var r=Object(p.a)(i.a.mark((function r(){return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log(c._id),r.next=3,f.Active(e.idpost);case 3:r.sent,q(!I),t("/main");case 6:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),L=function(){var e=Object(p.a)(i.a.mark((function e(r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r.preventDefault(),""==A.current.value?d(c.title):d(A.current.value),""==B.current.value?v(c.description):v(B.current.value),""==R.current.value?N(c.image):N(R.current.value),e.next=7,f.Update(c._id,x,g,k);case 7:e.sent&&(Object(b.b)("Updated successfully",{type:"success"}),t("/main")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0.response);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"font-quicksand p-6 flex flex-col justify-center min-h-screen w-full bg-gradient-to-t from-red-300 to-red-500 absolute",children:[Object(m.jsx)(b.a,{}),Object(m.jsxs)("div",{className:"flex flex-col shadow-2xl w-full rounded-lg bg-white justify-center  py-10 ",children:[c&&Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"font-quicksand flex justify-center px-10 mt-2",children:Object(m.jsxs)("div",{type:"button",className:"shadow-2xl h-full w-full py-4",children:[Object(m.jsxs)("div",{className:"flex justify-center gap-4",children:[Object(m.jsx)("p",{className:"text-gray-400 font-extrabold mt-1.5 px-4",children:"Current value :"}),Object(m.jsxs)("h1",{className:"mt-1 font-bold mb-4 text-xl",children:["   ",c.title," "]})]}),Object(m.jsx)("div",{className:"flex justify-center b",children:Object(m.jsx)("input",{type:"text",placeholder:"Type new title",className:"border-black border-2 w-10/12 my-2 rounded-xl px-3 py-1",ref:A})}),Object(m.jsxs)("div",{className:" flex justify-center border-2",children:[Object(m.jsx)("p",{className:"text-gray-400 font-extrabold mt-1.5 px-4",children:"Current image :"}),c.image&&Object(m.jsx)("img",{src:c.image,className:" w-50 h-40 px-4 py-2"}),null===c.image&&Object(m.jsx)("img",{src:"https://images.unsplash.com/photo-1591152231320-bc7902cf852e?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=876&q=80",className:" w-50 h-40 px-4"})]}),Object(m.jsx)("div",{className:"flex justify-center",children:Object(m.jsx)("input",{type:"text",placeholder:"Type new URL",className:"border-black border-2 w-10/12 my-2 rounded-xl px-3 py-1",ref:R})}),Object(m.jsxs)("div",{className:"flex  flex-col justify-center ",children:[Object(m.jsx)("p",{className:"text-gray-400 font-extrabold mt-1.5 text-center",children:"Current description :"}),Object(m.jsx)("p",{className:"text-xs overflow-x-hidden text-center",children:c.description}),Object(m.jsx)("div",{className:"flex justify-center",children:Object(m.jsx)("input",{type:"text",placeholder:"Type new description",className:"border-black border-2 w-10/12 my-2 rounded-xl px-3 py-2",ref:B})})]}),Object(m.jsxs)("div",{className:"flex  flex-row ml-2 ",children:[Object(m.jsx)("div",{className:"flex justify-start text-left ml-2 mb-1 mt-2 text-gray-400 font-bold mx-10"}),Object(m.jsx)("p",{className:"text-xs ml-2 mt-4 text-right px-2 mb-2",children:c.createdAt})]})]})})}),Object(m.jsx)("div",{className:"flex justify-center gap-2 mt-4",children:Object(m.jsx)("button",{type:"button ",className:"text-gray-400 font-quicksand font-bold px-10  hover:bg-red-800 p-4 rounded-xl ".concat(I?"bg-red-700 ":"bg-red-200 "),onClick:P,children:"Active"})})]}),Object(m.jsxs)("div",{className:"flex justify-center gap-2 mt-4",children:[Object(m.jsx)("button",{type:"button ",className:"bg-red-700 text-gray-200 font-quicksand font-bold px-10 hover:bg-red-800 p-4 rounded-xl",onClick:L,children:"Update"}),Object(m.jsx)("button",{type:"button",className:"px-10  bg-red-700 rounded-xl text-gray-200 font-quicksand font-bold",onClick:function(){return t("/main")},children:"Return home "})]})]})}),w=function(){var e=Object(n.useState)(!1),t=Object(O.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(0),s=Object(O.a)(c,2),o=s[0],u=(s[1],Object(l.f)()),b=function(){var e=Object(p.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.GetOwn(o,20);case 3:(t=e.sent)&&(console.log(t),u("/show",{array:t})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"flex flex-col min-h-screen w-screen absolute bg-white ".concat(r?"bg-opacity-50":"bg-opacity-0"),children:[Object(m.jsx)(x.c,{type:"button",className:"text-purple-500 w-10 text-center hover:text-purple-700",onClick:function(){a(!r)}}),r&&Object(m.jsxs)("lu",{className:"flex flex-col absolute mt-10 h-screen bg-white list-none w-36 gap-4 min-h-screen rounded-lg text-purple-700 font-bold font-quicksand",children:[Object(m.jsx)("li",{type:"button",className:"mt-10 mx-2 cursor-pointer",onClick:b,children:" My Posts"}),Object(m.jsx)("li",{type:"button",className:"mx-2 cursor-pointer",onClick:function(){u("/newpost")},children:"Create New Post"}),Object(m.jsx)("li",{type:"button",className:"mx-2 cursor-pointer",onClick:b,children:"Edit My Posts"})]})]})};var y=function(e){var t=e.post,r=e.favs;console.log(r.favorites);var a=Object(n.useState)(r.favorites.includes(t._id)),c=Object(O.a)(a,2),s=c[0],o=c[1],u=Object(n.useState)(!1),x=Object(O.a)(u,2),d=x[0],j=x[1],h=Object(n.useState)(t.likes.some((function(e){return e.username===t.user.username}))),v=Object(O.a)(h,2),w=v[0],y=v[1],k=Object(n.useState)(t.likes.length),N=Object(O.a)(k,2),S=N[0],C=N[1],I=Object(n.useState)(t.comments.length),q=Object(O.a)(I,2),A=q[0],B=q[1],R=Object(n.useState)(""),z=Object(O.a)(R,2),G=z[0],P=z[1],L=Object(l.f)(),T=Object(l.e)(),F=localStorage.getItem("token"),D=localStorage.getItem("role");function E(){return(E=Object(p.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.Like(t._id);case 3:e.sent,w?(C(S-1),y(!1)):(C(S+1),y(!0)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function M(){return(M=Object(p.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(G.length<=8)){e.next=7;break}return Object(b.b)("The comment has to have at least 8 letters",{type:"warning"}),e.abrupt("return");case 7:return e.next=9,f.Comment(t._id,G);case 9:B(A+1),window.location.reload();case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function _(){return(_=Object(p.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.Fav(t._id);case 3:e.sent,o(!s),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){F?"/show"==T.pathname&&"admin"===D&&j(!0):L("/")}),[]),Object(m.jsxs)("div",{className:"font-quicksand   ",children:[Object(m.jsx)(b.a,{}),t&&Object(m.jsxs)("div",{className:" shadow-2xl bg-white flex flex-col mt-2 w-full p-4 md:w-72 md:h-full rounded-2xl ",children:[Object(m.jsx)("div",{className:"w-full flex justify-end",children:Object(m.jsx)(g.f,{type:"button",className:"cursor-pointer  w-5  text-black flex justify-center  hover:text-gray-300 ".concat(d?"text-black":"text-gray-400"),onClick:function(){"/show"==T.pathname&&L("/update/".concat(t._id,"/").concat(t.active))}})}),Object(m.jsx)("div",{children:Object(m.jsxs)("h1",{className:"font-bold text-xl p-4 text-center overflow-hidden",children:[" ",t.title," "]})}),Object(m.jsxs)("div",{className:" flex justify-center border-2",children:[t.image&&Object(m.jsx)("img",{src:t.image,className:" w-50 h-40 px-4"}),null===t.image&&Object(m.jsx)("img",{src:"https://picsum.photos/200",className:"w-50 h-40 px-4"})]}),Object(m.jsx)("div",{children:Object(m.jsx)("p",{className:" overflow-hidden",children:t.description})}),Object(m.jsxs)("div",{className:"flex justify-evenly md:gap-10 py-2",children:[Object(m.jsx)("div",{className:"text-purple-700 font-semibold ",children:Object(m.jsxs)("p",{className:"px-0.5",children:[" @",t.user.username]})}),Object(m.jsxs)("div",{className:"mr-3 flex gap-1 px-1",children:[Object(m.jsxs)("div",{className:"flex flex-row gap-1",children:[Object(m.jsx)(g.e,{type:"button",className:"cursor-pointer mb-2 w-5 text-black-700 hover:text-red-700 ".concat(w?"text-red-600":"text-black"),onClick:function(){return E.apply(this,arguments)}}),Object(m.jsx)("p",{children:S})]}),Object(m.jsxs)("div",{className:" cursor-pointer flex flex-row gap-1",children:[Object(m.jsx)(g.c,{className:" mb-2 w-5 text-black-700 hover:text-gray-400 "}),Object(m.jsx)("p",{children:A})]}),Object(m.jsx)(g.b,{type:"button",className:"cursor-pointer w-5 mb-2  hover:text-gray-300 ".concat(s?"text-purple-900":"text-black-700"),onClick:function(){return _.apply(this,arguments)}})]})]}),Object(m.jsx)("p",{className:"text-xs ml-2 mt-4 text-right px-2 mb-2",children:t.createdAt}),Object(m.jsx)("div",{className:"font-quicksand flex flex-col  justify-center md:h-full ",children:t.comments.map((function(e){return Object(m.jsxs)("div",{className:"bg-white mt-1 mb-1 mx-2 border-gray-400 shadow-lg",children:[Object(m.jsxs)("div",{className:"flex  justify-center flex-grow gap-2",children:[Object(m.jsx)(g.g,{className:" w-4 mt-1 "}),Object(m.jsx)("p",{className:"text-xs font-bold",children:e.user.username})]}),Object(m.jsx)("p",{className:" text-xs text-center ",children:e.description})]})}))}),Object(m.jsxs)("form",{className:"flex mt-2 flex justify-center ",children:[Object(m.jsx)(g.f,{className:"w-8 mt-1 text-black md:mt-1"}),Object(m.jsx)("input",{className:"w-44 md:w-96  border-black border-2 rounded-md text-sm ",type:"text",placeholder:"Add a commment",onChange:function(e){P(e.target.value)}}),Object(m.jsx)("button",{type:"button",className:"bg-black rounded-xl   py-1.5 font-quicksand font-semibold text-white mx-2 md:px-2",onClick:function(){return M.apply(this,arguments)},children:"Add!"})]})]})]})},k=function(){var e=Object(n.useState)(),t=Object(O.a)(e,2),r=t[0],a=t[1],c=Object(l.f)(),s=localStorage.getItem("token"),o=localStorage.getItem("username"),u=localStorage.getItem("role"),x=Object(n.useState)(0),b=Object(O.a)(x,2),d=b[0],j=b[1],h=Object(n.useState)(!0),v=Object(O.a)(h,2),k=(v[0],v[1],Object(n.useState)()),N=Object(O.a)(k,2),S=N[0],C=N[1];Object(n.useEffect)((function(){function e(){return(e=Object(p.a)(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.GetAll(d,20);case 3:return t=e.sent,e.next=6,f.GetAllFav();case 6:return r=e.sent,e.next=9,C(t);case 9:return e.next=11,a(r);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0.response);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}s?function(){e.apply(this,arguments)}():c("/")}),[d]);return Object(m.jsxs)("div",{className:"bg-gradient-to-b from-purple-200 to-purple-400 w-screen min-h-screen ",children:[Object(m.jsxs)("div",{className:" flex  flex-row-reverse gap-2 bg-purple-600 p-2  text-gray-300 ",children:[Object(m.jsx)(g.h,{className:"w-8 "}),Object(m.jsx)("h1",{className:"font-quicksand font-extrabold text-lg  text-right",children:o})]}),Object(m.jsx)("div",{className:"w-2",children:"admin"===u&&Object(m.jsx)(w,{})}),Object(m.jsxs)("div",{className:"flex justify-center gap-4",children:[Object(m.jsx)("h1",{className:"text-gray-600 text-4xl font-quicksand font-bold text-center mt-20",children:" Double Vision   "}),Object(m.jsx)(g.d,{className:"w-12 mt-20 text-purple-700 "})]}),Object(m.jsx)("h2",{className:"text-gray-400 text-xl font-quicksand font-bold text-center ",children:" Watch from a different perpective! "}),Object(m.jsx)("div",{className:"flex flex-col  mt-48 mx-20 justify-center md:flex-row md:flex-wrap md:justify-between md:gap-10",children:S&&r&&S.map((function(e){return Object(m.jsx)(y,{post:e,favs:r})}))}),Object(m.jsxs)("div",{className:"flex flex-col justify-center mx-20 gap-4 mt-6 p-6 md:flex-row",children:[Object(m.jsx)("button",{className:"bg-purple-700 text-gray-200 p-4 text-center w-full rounded-lg hover:bg-purple-800",onClick:function(){0===d?j(0):(j(d-1),window.scrollTo(0,0))},children:"Previous"}),Object(m.jsx)("button",{className:"bg-purple-700 text-gray-200 p-4 text-center w-full rounded-lg hover:bg-purple-800 ",onClick:function(){j(d+1),window.scrollTo(0,0)},children:"Next"}),Object(m.jsx)("button",{className:" bg-red-500  text-gray-200 p-4 font-bold w-full rounded-xl hover:bg-red-700",onClick:function(){f.Logout()},children:"Log out"})]})]})},N=function(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null),r=Object(n.useRef)(null),a=Object(n.useState)(""),c=Object(O.a)(a,2),s=c[0],o=c[1],u=Object(n.useState)(""),d=Object(O.a)(u,2),j=d[0],h=d[1],g=Object(n.useState)(""),v=Object(O.a)(g,2),w=v[0],y=v[1],k=Object(l.f)(),N=localStorage.getItem("token"),S=localStorage.getItem("role");function C(){return(C=Object(p.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.CreatePost(s,j,w);case 3:e.sent&&(Object(b.b)("Post Created",{type:"success"}),k("/main")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}Object(n.useEffect)((function(e){N&&"user"!==S||k("/")}),[]);return Object(m.jsxs)("div",{className:"bg-gradient-to-l from-green-300 to-green-600 h-screen",children:[Object(m.jsx)(b.a,{}),Object(m.jsxs)("div",{className:"flex flex-col justify-center gap-2",children:[Object(m.jsx)("h1",{className:"font-quicksand  text-gray-200 text-3xl font-bold mt-20 text-center",children:"Create new post"}),Object(m.jsx)("h2",{className:"font-quicksand  text-gray-100 text-lg  text-center",children:"have some new idea?"})]}),Object(m.jsxs)("div",{className:"flex flex-col justify-center gap-6 ",children:[Object(m.jsxs)("div",{className:"flex justify-center gap-2 ",children:[Object(m.jsx)(x.e,{className:"w-10 mt-20 text-green-900"}),Object(m.jsx)("input",{type:"text",placeholder:"Title",className:"mt-20 py-4 px-10 rounded-xl md:px-32 ",ref:e})]}),Object(m.jsxs)("div",{className:"flex justify-center gap-2",children:[Object(m.jsx)(x.a,{className:"w-10 text-green-900"}),Object(m.jsx)("input",{type:"text",placeholder:"Description",className:"py-4 px-10 rounded-xl md:px-32",ref:t})]}),Object(m.jsxs)("div",{className:"flex justify-center gap-2 ",children:[Object(m.jsx)(x.d,{className:"w-10 text-green-900"}),Object(m.jsx)("input",{type:"text",placeholder:"URL image (opt)",className:"py-4 px-10 rounded-xl md:px-32",ref:r})]}),Object(m.jsx)("button",{type:"button",className:"py-4 mx-12 md:mx-96 mt-4 bg-green-700 rounded-xl text-gray-100 font-quicksand font-bold  text-center hover:bg-green-800 ",onClick:function(){o(e.current.value),h(t.current.value),y(r.current.value),console.log(w),s&&j?function(){C.apply(this,arguments)}():Object(b.b)("Please enter a title and description to the post",{type:"warning"})},children:"Create!"})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"button",className:"p-2 mt-48 ml-2 bg-green-700 rounded-xl text-gray-200 font-quicksand font-bold",onClick:function(){return k("/main")},children:"Return home "})})]})},S=function(){var e=Object(n.useState)(),t=Object(O.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(0),s=Object(O.a)(c,2),o=s[0],u=(s[1],Object(n.useState)()),x=Object(O.a)(u,2),b=x[0],d=x[1],j=Object(l.f)(),h=localStorage.getItem("token"),v=localStorage.getItem("role");return Object(n.useEffect)((function(){function e(){return(e=Object(p.a)(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.GetOwn(o,20);case 3:return t=e.sent,e.next=6,f.GetAllFav();case 6:return r=e.sent,e.next=9,a(t);case 9:return e.next=11,d(r);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0.response);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}h&&"user"!==v?function(){e.apply(this,arguments)}():j("/")}),[o]),Object(m.jsxs)("div",{className:"bg-gradient-to-b from-yellow-200 to-yellow-500 w-full min-h-screen",children:[Object(m.jsxs)("div",{className:"flex justify-center gap-4",children:[Object(m.jsx)("h1",{className:"text-center pt-10 text-gray-500 font-quicksand text-3xl font-bold",children:"My Posts"}),Object(m.jsx)(g.a,{className:"w-10 mt-10  text-yellow-700"})]}),Object(m.jsx)("h2",{className:"text-gray-400 text-center font-quicksand mt-2 font-bold",children:"Check the new stuff!"}),Object(m.jsx)("div",{className:"flex flex-col  mt-48 mx-20 justify-center md:flex-row md:flex-wrap md:justify-between md:gap-8",children:r&&b&&r.map((function(e){return Object(m.jsx)(y,{post:e,favs:b})}))}),Object(m.jsx)("button",{type:"button",className:"p-2 mt-10 ml-2 bg-yellow-700 rounded-xl text-gray-200 font-quicksand font-bold",onClick:function(){return j("/main")},children:"Return home "})]})},C=function(){return Object(m.jsx)("p",{children:"Hola"})},I=function(){return Object(m.jsx)("div",{className:"h-screen w-full bg-gradient-to-b from-blue-400 to-blue-200 flex justify-center",children:Object(m.jsxs)("div",{className:"bg-white m-28 mx-12 absolute md:flex md:flex-row-reverse flex flex-col-reverse  p-10 h-96 w-4/5",children:[Object(m.jsx)("img",{src:"https://onlinezebra.com/wp-content/uploads/2019/01/error-404-not-found.jpg",class:"md:w-auto w-48 md:mt-10 mt-auto md:h-auto h-40 md:object-left ml-4 "}),Object(m.jsxs)("div",{className:"md:text-center   md:mt-10 mt-24",children:[Object(m.jsx)("h1",{className:"text-lg md:text-6xl text-gray-600 font-quicksand text-center",children:"404"}),Object(m.jsx)("h2",{className:"text-sm md:text-4xl text-gray-500 font-quicksand text center flex justify-center",children:"Oops! Something went wrong"}),Object(m.jsx)("p",{className:" text-xs md:text-lg p-4 text-quicksand text-justify",children:" Remember those old 404 pages from the 90s that said somethink like \"Something's gone wrong, but don't worry, our websmasters have been notified. \"But were the websmasters ever notified? I mean, were they really?"})]})]})})},q=function(){return Object(m.jsx)(o.a,{children:Object(m.jsxs)(l.c,{children:[Object(m.jsx)(l.a,{exact:!0,path:"/",element:Object(m.jsx)(h,{})}),Object(m.jsx)(l.a,{exact:!0,path:"/main",element:Object(m.jsx)(k,{})}),Object(m.jsx)(l.a,{exact:!0,path:"/newpost",element:Object(m.jsx)(N,{})}),Object(m.jsx)(l.a,{exact:!0,path:"/show",element:Object(m.jsx)(S,{})}),Object(m.jsx)(l.a,{exact:!0,path:"/update/:idpost/:active",element:Object(m.jsx)(v,{})}),Object(m.jsx)(l.a,{path:"*",element:Object(m.jsx)(I,{})}),Object(m.jsx)(l.a,{exact:!0,path:"/favs",elements:Object(m.jsx)(C,{})})]})})},A=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,54)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))};s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(q,{})}),document.getElementById("root")),A()}},[[53,1,2]]]);
//# sourceMappingURL=main.5a2536a0.chunk.js.map